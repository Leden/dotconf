#!/bin/sh

set -xe

CMD=$(basename "$0")
PACKAGES="$HOME/cfg/apt-packages"
PKG_NAME=${1}

if [ "x${PKG_NAME}" = "x" ]
then
    echo "${CMD} requires a package name as an argument"
    exit 1
fi

LINES=$(grep -E "^${PKG_NAME}$" ${PACKAGES} | wc -l)
if [ ${LINES} -ne 0 ]
then
    echo "${PKG_NAME} is already added. Use pkg-update to update it."
    exit 1
fi

echo ${PKG_NAME} >>${PACKAGES}

sudo apt install -y ${PKG_NAME}

